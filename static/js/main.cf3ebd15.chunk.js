(this["webpackJsonptask-tv-shows"]=this["webpackJsonptask-tv-shows"]||[]).push([[0],{18:function(e,t,n){e.exports={Shows:"ShowsPage_Shows__2RD5-",Show:"ShowsPage_Show__zequl",Rating:"ShowsPage_Rating__29Fbi",Name:"ShowsPage_Name__2K61q",Genre:"ShowsPage_Genre__R6emS"}},22:function(e,t,n){e.exports={RatingLabel:"RatingLabel_RatingLabel__2MKcz",ColorGrey:"RatingLabel_ColorGrey__2I3Zn",ColorGreen:"RatingLabel_ColorGreen__C9iRK",ColorGold:"RatingLabel_ColorGold__2Lxns"}},32:function(e,t,n){e.exports={Show:"ShowPage_Show__Oc3P5",Image:"ShowPage_Image__2lGkK"}},39:function(e,t,n){e.exports={App:"App_App__1sVak"}},41:function(e,t,n){e.exports=n(54)},52:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(23),o=n.n(c),s=n(16),u=n(19),l=n(14),i=n(11),h="contacts/LOAD_SHOWS_SUCCESS",w=function(e){var t=e.entities.shows,n=e.result;return{type:h,shows:t,showsIds:n}},m=n(31),f=function(e){return Object(i.get)(e,"shows.shows")},p=Object(m.a)(f,(function(e){return Object(i.get)(e,"shows.showsIds")}),(function(e,t){return t.map((function(t){return e[t]})).sort((function(e,t){return e.name>t.name?1:-1}))})),b=function(e){return Object(m.a)(f,(function(t){return t[e]}))},g=n(32),d=n.n(g),O={loadShow:function(e){return{type:"contacts/LOAD_SHOW_REQUEST",showId:e}}},_=Object(s.b)((function(e,t){var n=Object(i.get)(t,"match.params.showId");return{show:b(n)(e),showId:n}}),O)((function(e){var t=e.loadShow,n=e.show,c=e.showId,o=(Object(l.f)(),Object(l.g)());return console.log(1,o),console.log(2,c),console.log(3,n),Object(a.useEffect)((function(){c&&!n&&t(c)}),[t,c,n]),n?r.a.createElement("div",{className:d.a.Show},r.a.createElement("img",{className:d.a.Image,alt:n.name,src:Object(i.get)(n,"image.original")})):null})),v=n(38),j=n.n(v),S=n(22),E=n.n(S),x=function(e){var t=e.className,n=e.value;return n?r.a.createElement("div",{className:j()(t,E.a.RatingLabel,n>=4&&E.a.ColorGrey,n>=7&&E.a.ColorGreen,n>=9&&E.a.ColorGold)},n):null},k=n(18),R=n.n(k),I={loadShows:function(){return{type:"contacts/LOAD_SHOWS_REQUEST"}}},G=Object(s.b)((function(e){return{shows:p(e)}}),I)((function(e){var t=e.loadShows,n=e.shows,c=Object(l.f)();return Object(a.useEffect)((function(){t()}),[t]),r.a.createElement("div",{className:R.a.Shows},n.map((function(e){return r.a.createElement("div",{className:R.a.Show,key:e.id,onClick:function(){return c.push("/show/".concat(e.id))}},r.a.createElement(x,{className:R.a.Rating,value:Object(i.get)(e,"rating.average")}),r.a.createElement("img",{alt:e.name,src:Object(i.get)(e,"image.medium")}),r.a.createElement("span",{className:R.a.Name},e.name,", ",e.premiered.substring(0,4)),r.a.createElement("span",{className:R.a.Genre},e.genres.join(", ")))})))})),C=n(39),L=n.n(C),N=function(){return r.a.createElement("div",{className:L.a.App},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:G}),r.a.createElement(l.a,{exact:!0,path:"/show/:showId",component:_}),r.a.createElement(l.a,{component:function(){return r.a.createElement("div",null,"page not found")}})))},y=(n(52),n(7)),A=n(40),P=n(26),T=n(27),D=n(17),H=Object(y.c)({shows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(T.a)({state:e},t.shows);default:return e}},showsIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(i.uniq)([].concat(Object(D.a)(e),Object(D.a)(t.showsIds)));default:return e}}}),U=n(9),W=n.n(U),q=n(15),K=n(21),Q=function(e){return fetch("".concat("https://api.tvmaze.com").concat(e),{method:"GET"}).then((function(e){return e.json()}))},z=[new K.b.Entity("shows")],J=W.a.mark(V),B=W.a.mark(Z),F=W.a.mark(X),M=W.a.mark(Y);function V(e){var t,n,a,r;return W.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.showId,c.prev=1,c.next=4,Q("/shows/".concat(t));case 4:return n=c.sent,console.log("result1",n),a=Object(K.a)([n],z),c.next=9,Object(q.b)(w(a));case 9:return c.next=11,Q("/shows/".concat(t,"/episodes"));case 11:r=c.sent,console.log("result2",r),c.next=18;break;case 15:c.prev=15,c.t0=c.catch(1),console.log("loadShowTaskError",c.t0);case 18:case"end":return c.stop()}}),J,null,[[1,15]])}function Z(){var e,t;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Q("/search/shows?q=girls");case 3:return e=n.sent,t=Object(K.a)(e.map((function(e){return e.show})),z),n.next=7,Object(q.b)(w(t));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("loadShowsTaskError",n.t0);case 12:case"end":return n.stop()}}),B,null,[[0,9]])}function X(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.c)("contacts/LOAD_SHOW_REQUEST",V);case 2:case"end":return e.stop()}}),F)}function Y(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.c)("contacts/LOAD_SHOWS_REQUEST",Z);case 2:case"end":return e.stop()}}),M)}var $=[{name:"shows",reducer:H,sagas:[X(),Y()]}],ee={};$.forEach((function(e){e.reducer&&(ee=Object(T.a)({},ee,Object(P.a)({},e.name,e.reducer)))}));var te=Object(y.c)(ee),ne=W.a.mark(re),ae=[];function re(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.a)(ae);case 2:case"end":return e.stop()}}),ne)}$.forEach((function(e){e.sagas&&(ae=[].concat(Object(D.a)(ae),Object(D.a)(e.sagas)))}));o.a.render(r.a.createElement(s.a,{store:function(){var e=Object(A.a)(),t=Object(y.e)(te,Object(y.d)(Object(y.a)(e)));return e.run(re),t}()},r.a.createElement(u.a,{basename:"/task-tv-shows"},r.a.createElement(N,null))),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.cf3ebd15.chunk.js.map